services:
  # ü¶â Zookeeper - —Å–µ—Ä–≤—ñ—Å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏ Kafka (–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π)
  zookeeper:
    image: confluentinc/cp-zookeeper:latest  # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –æ–±—Ä–∞–∑ Zookeeper
    container_name: zookeeper
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181  # Zookeeper –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É 2181
    ports:
      - "2181:2181"  # –ü—Ä–æ–∫—Å—ñ—é—î–º–æ –ø–æ—Ä—Ç –Ω–∞ —Ö–æ—Å—Ç, —â–æ–± Kafka –º–æ–≥–ª–∞ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è

  # ü¶Ñ Kafka - –æ—Å–Ω–æ–≤–Ω–∏–π –±—Ä–æ–∫–µ—Ä, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  kafka:
    image: confluentinc/cp-kafka:latest  # –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –æ–±—Ä–∞–∑ Kafka
    container_name: kafka
    depends_on:
      - zookeeper  # Kafka –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è Zookeeper
    ports:
      - "9092:9092"  # –ü–æ—Ä—Ç –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞ (–∑–æ–≤–Ω—ñ Docker)
      - "29092:29092" # –ü–æ—Ä—Ç –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ —ñ–Ω—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ Docker
    environment:
      KAFKA_BROKER_ID: 1  # ID –±—Ä–æ–∫–µ—Ä–∞ (—è–∫—â–æ —î –∫—ñ–ª—å–∫–∞ –±—Ä–æ–∫–µ—Ä—ñ–≤, –∫–æ–∂–µ–Ω –º–∞—î —Å–≤—ñ–π —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID)
      KAFKA_ZOOKEEPER_CONNECT: "zookeeper:2181"  # –í–∫–∞–∑—É—î–º–æ Kafka, –¥–µ —à—É–∫–∞—Ç–∏ Zookeeper
      # üîΩ –î–≤–∞ —Å–ø–æ—Å–æ–±–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:
      # 1. PLAINTEXT://localhost:9092 - –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ —Ç–≤–æ—î—ó IDE)
      # 2. PLAINTEXT_INTERNAL://kafka:29092 - –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ —ñ–Ω—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ —É –º–µ—Ä–µ–∂—ñ Docker
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092,PLAINTEXT_INTERNAL://kafka:29092
      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_INTERNAL:PLAINTEXT
      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT_INTERNAL  # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–≤'—è–∑–∫—É –º—ñ–∂ –±—Ä–æ–∫–µ—Ä–∞–º–∏ (—è–∫—â–æ —ó—Ö –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ)
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1  # –†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è —Ç–æ–ø—ñ–∫—ñ–≤ (1, –±–æ —É –Ω–∞—Å —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –±—Ä–æ–∫–µ—Ä)

  # üìä Kafka UI - –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Ç–æ–ø—ñ–∫—ñ–≤ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É Kafka
  kafka-ui:
    image: provectuslabs/kafka-ui:latest  # –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –æ–±—Ä–∞–∑ Kafka UI
    container_name: kafka-ui
    depends_on:
      - kafka  # UI –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è Kafka
    ports:
      - "8181:8080"  # –ü—Ä–æ–∫—Å—ñ—é—î–º–æ –ø–æ—Ä—Ç 8080, —â–æ–± –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ UI —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
    environment:
      KAFKA_CLUSTERS_0_NAME: local  # –ù–∞–∑–≤–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kafka
      KAFKA_CLUSTERS_0_BOOTSTRAP_SERVERS: kafka:29092  # –í–∫–∞–∑—É—î–º–æ, –¥–µ –∑–Ω–∞–π—Ç–∏ Kafka (—á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –º–µ—Ä–µ–∂—É Docker)
      KAFKA_CLUSTERS_0_ZOOKEEPER: zookeeper:2181  # –í–∫–∞–∑—É—î–º–æ, –¥–µ –∑–Ω–∞–π—Ç–∏ Zookeeper
